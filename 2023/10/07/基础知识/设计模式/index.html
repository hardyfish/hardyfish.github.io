<!DOCTYPE html>
<html lang="en" oncontextmenu="return false;">

<head oncontextmenu="return false;">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="baidu-site-verification" content="codeva-QodU0Nk5F7" />
	<meta name="google-site-verification" content="DbSTw8OJwtH5Qei7n8Jnew0YyQ5naPzdLAPiscu7zQE" />
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?7eeb54583579fabc0878be210d6ad60a";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>

	
	<!-- title -->
	
	<title>
	
		设计模式 | 
	 
	月伴飞鱼
	</title>
	
	<!-- keywords,description -->
	 

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/%E5%A4%B4%E5%83%8F.jpg">
	
  
  	
<link rel="stylesheet" href="/css/main.css">

  	
<link rel="stylesheet" href="/css/reward.css">

	
<link rel="stylesheet" href="/css/jquery.fancybox.min.css">

	
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="/lib/highlight/darcula.css">

	
<link rel="stylesheet" href="/css/clipboard-use.css">


	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">


	
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>


	
<script src="/lib/highlight/highlight.min.js"></script>


	
<script src="https://readmore.openwrite.cn/js/readmore-2.0.js"></script>

	
<script src="/lib/jquery-3.4.1.min.js"></script>

	
<script src="/lib/jquery.pjax.js"></script>


	
<script src="/js/main.js"></script>

	
<script src="/js/jquery.fancybox.min.js"></script>

	
		
<script src="/lib/valine/av-3.0.4-min.js"></script>

		
<script src="/lib/valine/Valine-1.3.10-min.js"></script>

	
	
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
	
<script src="/js/clipboard.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body oncontextmenu="return false;">
	<header id="header" oncontextmenu="return false;">
    <a id="title" href="/" class="logo">公众号月伴飞鱼</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">关于我</a>
		</li>

		<li class="menu-item">
			<a href="/个人微信.jpeg" class="menu-item-link">联系作者</a>
		</li>

	    <li class="menu-item">
			<a href="/site" class="menu-item-link">关于网站</a>
		</li>

		<li class="menu-item">
			<a href="/个人公众号.jpg" class="menu-item-link" target="_blank">我的公众号</a>
		</li>
		
		<li class="menu-item">
			<a href="https://tech.meituan.com/" class="menu-item-link" target="_blank">
				美团技术团队
			</a>
		</li>
		<li class="menu-item">
			<a href="https://tech.youzan.com/" class="menu-item-link" target="_blank">
				有赞技术团队
			</a>
		</li>
		<!--<li class="menu-item">
			<select class="menu-item-link menu-item-select">
				<option class="menu-item-link"  value="volvo">Volvo</option>
				<option class="menu-item-link"  value="saab">Saab</option>
				<option class="menu-item-link"  value="fiat">Fiat</option>
				<option class="menu-item-link"  value="audi">Audi</option>
			</select>
		</li>-->
	</ul>
</header>

	<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="text" placeholder="按目录搜索一下">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										AI相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/14/AI%E7%9B%B8%E5%85%B3/AIGC/">
										AIGC
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										中间件
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/30/%E4%B8%AD%E9%97%B4%E4%BB%B6/Dubbo/">
										Dubbo
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/19/%E4%B8%AD%E9%97%B4%E4%BB%B6/Elasticsearch/">
										Elasticsearch
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/30/%E4%B8%AD%E9%97%B4%E4%BB%B6/Netty/">
										Netty
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/25/%E4%B8%AD%E9%97%B4%E4%BB%B6/Solr/">
										Solr
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/19/%E4%B8%AD%E9%97%B4%E4%BB%B6/ZooKeeper/">
										ZooKeeper
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										代码思想
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/12/15/%E4%BB%A3%E7%A0%81%E6%80%9D%E6%83%B3/CodeReview/">
										CodeReview
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/02/%E4%BB%A3%E7%A0%81%E6%80%9D%E6%83%B3/%E4%BB%A3%E7%A0%81%E9%87%8D%E6%9E%84/">
										代码重构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										前端相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/CSS/">
										CSS
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/12/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">
										小程序
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										基础知识
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/11/11/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Go%E5%9F%BA%E7%A1%80/">
										Go基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/27/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/JVM/">
										JVM
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/21/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Java%E5%9F%BA%E7%A1%80/">
										Java基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%88%86%E5%B8%83%E5%BC%8F/">
										分布式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/10/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">
										并发编程
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/2023/10/07/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
										设计模式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										大数据相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/25/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Doris/">
										Doris
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/20/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Flink/">
										Flink
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Hive/">
										Hive
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/20/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Spark/">
										Spark
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										学习专栏
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/31/%E5%AD%A6%E4%B9%A0%E4%B8%93%E6%A0%8F/%E4%BB%A3%E7%A0%81%E4%B9%8B%E4%B8%91/">
										代码之丑
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/26/%E5%AD%A6%E4%B9%A0%E4%B8%93%E6%A0%8F/%E5%A4%A7%E5%8E%82%E6%99%8B%E5%8D%87%E6%8C%87%E5%8D%97/">
										大厂晋升指南
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										学习书籍
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/11/16/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C/">
										Java开发手册
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										工具相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/11/09/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Arthas/">
										Arthas
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/24/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/ChatGPT/">
										ChatGPT
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/21/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GIT/">
										GIT
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/21/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Hexo/">
										Hexo
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/21/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MAC/">
										MAC
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/01/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Maven/">
										Maven
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/09/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/PlantUML/">
										PlantUML
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/22/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/UTools/">
										UTools
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">
										实用工具
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										成长相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/31/%E6%88%90%E9%95%BF%E7%9B%B8%E5%85%B3/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">
										技术学习
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/07/%E6%88%90%E9%95%BF%E7%9B%B8%E5%85%B3/%E8%AF%BB%E4%B9%A6%E8%AE%A1%E5%88%92/">
										读书计划
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/09/%E6%88%90%E9%95%BF%E7%9B%B8%E5%85%B3/%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/">
										面试相关
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										数据库
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/27/%E6%95%B0%E6%8D%AE%E5%BA%93/HBase/">
										HBase
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/09/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/">
										MongoDB
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/02/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">
										MySQL
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/">
										Redis
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										服务器
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E6%9C%8D%E5%8A%A1%E5%99%A8/Docker/">
										Docker
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/09/%E6%9C%8D%E5%8A%A1%E5%99%A8/Nginx/">
										Nginx
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/03/%E6%9C%8D%E5%8A%A1%E5%99%A8/Tomcat/">
										Tomcat
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/09/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%BF%90%E7%BB%B4%E7%9F%A5%E8%AF%86/">
										运维知识
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										架构相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/21/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/DDD/">
										DDD
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/02/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E6%9E%B6%E6%9E%84%E5%9B%BE/">
										架构图
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/02/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/">
										架构学习
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/26/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E7%B3%BB%E7%BB%9F%E4%BF%9D%E9%9A%9C/">
										系统保障
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/31/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD/">
										系统性能
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/26/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">
										系统设计
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										框架相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/07/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Caffeine/">
										Caffeine
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/06/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Guava/">
										Guava
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/15/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/JWT/">
										JWT
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/08/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/MyBatis/">
										MyBatis
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/14/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/RPC%E6%A1%86%E6%9E%B6/">
										RPC框架
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/26/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Seata/">
										Seata
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/14/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Spring/">
										Spring
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/03/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Thrift/">
										Thrift
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/29/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/XXLJOB/">
										XXLJOB
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">
										开源框架
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										消息队列
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/KAFKA/">
										KAFKA
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/20/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/">
										RabbitMQ
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RocketMQ/">
										RocketMQ
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										源码相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/12/13/%E6%BA%90%E7%A0%81%E7%9B%B8%E5%85%B3/RocketMQ/">
										RocketMQ
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										生活相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/27/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E4%B9%A6%E7%B1%8D/">
										书籍
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/17/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E5%81%9A%E8%8F%9C/">
										做菜
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E7%94%B5%E5%BD%B1/">
										电影
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/10/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E7%94%B5%E8%A7%86%E5%89%A7/">
										电视剧
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/11/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E7%BA%AA%E5%BD%95%E7%89%87/">
										纪录片
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/09/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9F%B3%E4%B9%90/">
										音乐
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										算法相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2022/11/26/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/LeetCode/">
										LeetCode
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/26/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E5%89%91%E6%8C%87OFFER/">
										剑指OFFER
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/25/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95/">
										面试算法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										系统相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E4%BB%BB%E5%8A%A1%E7%B3%BB%E7%BB%9F/">
										任务系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/18/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E5%B9%BF%E5%91%8A%E7%B3%BB%E7%BB%9F/">
										广告系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E6%89%93%E8%BD%A6%E7%B3%BB%E7%BB%9F/">
										打车系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/18/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/">
										推荐系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E7%94%A8%E6%88%B7%E7%B3%BB%E7%BB%9F/">
										用户系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E7%9B%B4%E6%92%AD%E7%B3%BB%E7%BB%9F/">
										直播系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E7%9F%AD%E9%93%BE%E7%B3%BB%E7%BB%9F/">
										短链系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E7%A4%BE%E5%8C%BA%E7%B3%BB%E7%BB%9F/">
										社区系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F/">
										秒杀系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/19/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E7%BA%A2%E5%8C%85%E7%B3%BB%E7%BB%9F/">
										红包系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/18/%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3/%E8%AE%A2%E5%8D%95%E7%B3%BB%E7%BB%9F/">
										订单系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										英语相关
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										老友记
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/08/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%80%81%E5%8F%8B%E8%AE%B0/%E7%AC%AC%E4%B8%80%E5%AD%A3/">
										第一季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/08/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%80%81%E5%8F%8B%E8%AE%B0/%E7%AC%AC%E4%B8%89%E5%AD%A3/">
										第三季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/23/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%80%81%E5%8F%8B%E8%AE%B0/%E7%AC%AC%E4%BA%94%E5%AD%A3/">
										第五季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/17/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%8B%B1%E8%AF%AD%E8%AF%AD%E6%B3%95/">
										英语语法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										雅思
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/25/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E9%9B%85%E6%80%9D/%E5%89%91%E6%A1%A5%E9%9B%85%E6%80%9D%E5%90%AC%E5%8A%9B%E7%9C%9F%E9%A2%9815/">
										剑桥雅思听力真题15
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/12/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E9%9B%85%E6%80%9D/%E5%89%91%E6%A1%A5%E9%9B%85%E6%80%9D%E5%90%AC%E5%8A%9B%E7%9C%9F%E9%A2%984/">
										剑桥雅思听力真题4
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										计算机基础
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
										操作系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
										数据结构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%AE%97%E6%B3%95%E7%9F%A5%E8%AF%86/">
										算法知识
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">
										网络基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title" oncontextmenu="return false;">

	设计模式
</h1>
<div class="article-meta" oncontextmenu="return false;">
	<span>月伴飞鱼</span>
	<span>2023-10-07 15:01:30</span>
    
		<div id="article-categories">
            
                
                    <span>
                        <i class="fa fa-folder" aria-hidden="true"></i>
                        <a href="/categories/基础知识/">基础知识</a>
						
                    </span>
                
            
		</div>
    
</div>

<div id="container" class = "content999" oncontextmenu="return false;">
<!--打赏-->
        <div class="reward">
       <div class="reward-button">赏 <span class="reward-code">
        <span class="alipay-code"> <img class="alipay-img wdp-appear" src="/alipay.png"><b>支付宝打赏</b> </span> 
        <span class="wechat-code"> <img class="wechat-img wdp-appear" src="/weipay.jpeg"><b>微信打赏</b> </span> 
       </div>
      <p class="reward-notice">如果文章对你有帮助，欢迎点击上方按钮打赏作者！</p>
      </div>
      <!--打赏-->
	<div id="article-content">
		<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><p><strong>封装</strong></p>
<p>通过对类的封装，仅仅暴露少许必要的方法给调用方使用，调用方不需要了解太多背后的业务细节，大大降低了用错的概率，提高了代码的易用性。</p>
<p><strong>抽象</strong></p>
<p>通过抽象化只暴露出方法定义，而隐藏方法的具体实现，让调用者只需要关心方法提供了哪些功能，并不需要知道这些功能是如何实现的。</p>
<blockquote>
<p>作用：通过抽象化手段，没有暴露出来实现细节，所以当后来改变具体的实现细节时，对于调用方来说不需要或仅有少量修改，提高了代码的可扩展性和可维护性。</p>
</blockquote>
<p><strong>继承</strong></p>
<p>表示类之间is-a的关系，比如猫是一种哺乳动物。</p>
<blockquote>
<p>作用：最大的一个好处就是提高了代码的复用性。</p>
</blockquote>
<p><strong>多态</strong></p>
<p>一个父类有多个不同的子类，而且多个子类都可以替换父类去使用。</p>
<blockquote>
<p>作用：提高代码的可扩展性和复用性。</p>
</blockquote>
<p><strong>面向对象和面向过程</strong></p>
<p>面向对象编程：以类为组织代码的基本单元，面向过程编程：以过程（或方法）作为组织代码的基本单元。</p>
<p>面向过程编程：数据和方法相分离。不支持丰富的面向对象编程特性，比如继承、多态、封装。</p>
<h2 id="设计原则"><a href="#设计原则" class="headerlink" title="设计原则"></a>设计原则</h2><p><strong>单一职责原则（Single Responsibility Principle）</strong></p>
<blockquote>
<p>一个类应该只负责一项职责。</p>
<ul>
<li>如类A负责两个不同职责：职责1，职责2。</li>
</ul>
<p>当职责1需求变更而改变A时，可能造成职责2执行错误，所以需要将类A的粒度分解为A1，A2。</p>
</blockquote>
<p><strong>接口隔离原则（Interface Segregation Principle）</strong></p>
<blockquote>
<p>客户端不应该依赖它不需要的接口，即一个类对另一个类的依赖应该建立在最小的接口上。</p>
<ul>
<li>大接口要分割成小接口，接口专用。</li>
<li>客户端使用专用接口。</li>
</ul>
</blockquote>
<p><strong>依赖倒转原则（Dependency Inversion Principle）</strong></p>
<blockquote>
<p>高层模块不应该依赖低层模块，二者都应该依赖其抽象（接口或者抽象类）。</p>
<ul>
<li>抽象不应该依赖细节，细节应该依赖抽象。</li>
</ul>
<p>依赖倒转(倒置)的中心思想是面向接口编程。</p>
</blockquote>
<p><strong>里氏替换原则（Liskov Substitution Principle）</strong></p>
<blockquote>
<p>所有引用基类（父类）的地方必须能透明地使用其子类的对象。</p>
<ul>
<li>把父类设计为抽象类或者接口。</li>
<li>子类必须实现父类的所有方法。</li>
</ul>
</blockquote>
<p><strong>开闭原则（Open Closed Principle）</strong></p>
<blockquote>
<p>对扩展开放，对修改关闭。</p>
<ul>
<li>使用接口和抽象类，实现不修改原代码，又可以拓展新方法。</li>
</ul>
</blockquote>
<p><strong>迪米特法制（Demeter Principle）</strong></p>
<blockquote>
<p>一个对象应该对其他对象保持最少的了解。</p>
<p>一个实体应当尽量少的与其他实体之间发生相互作用。</p>
<ul>
<li>依赖者只依赖该依赖的对象，被依赖者只暴露该暴露的对象。</li>
</ul>
</blockquote>
<p><strong>合成复用原则（Composite Reuse principle）</strong></p>
<blockquote>
<p>尽量使用合成&#x2F;聚合的方式，而不是使用继承。</p>
</blockquote>
<h1 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h1><p><strong>关联关系</strong></p>
<blockquote>
<p>泛化：</p>
<ul>
<li>继承关系，符号：空心三角箭头的实线，箭头指向父类。</li>
</ul>
<p>实现：</p>
<ul>
<li>类与接口的关系，表达类实现了接口的特征行为，符号：带三角箭头的虚线，箭头指向接口。</li>
</ul>
<p>组合：</p>
<ul>
<li>整体与部分的关系，但部分不能离开整体而单独存在，符号：带实心菱形的实线，菱形指向整体。</li>
</ul>
<p>聚合：</p>
<ul>
<li>整体和部分关系，且部分可以离开整体而单独存在，符号：空心菱形的实心线，菱形指向整体。</li>
</ul>
<p>关联：</p>
<ul>
<li>类和类的关系，表达一个类知道另一个类的属性和方法，符号：带普通箭头（或实心三角形箭头）的实心线。</li>
</ul>
<p>依赖：</p>
<ul>
<li>使用的关系，即一个类的实现需要另一个类的协助，所以要尽量不使用双向的互相依赖，符号：带箭头的虚线，指向被依赖的类。</li>
</ul>
</blockquote>
<p><img src="/images/584866-20230607115559582-1375349133.jpg" alt="img"></p>
<p><strong>类图表示方法</strong></p>
<blockquote>
<p>从上到下分为3部分：类名、属性、方法。</p>
<p>符号含义：<code>+ public、- private、#protected</code></p>
</blockquote>
<p><img src="/images/584866-20230605165807681-627586503.jpg" alt="img"></p>
<h1 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h1><h2 id="简单工厂模式"><a href="#简单工厂模式" class="headerlink" title="简单工厂模式"></a>简单工厂模式</h2><blockquote>
<p>定义一个工厂类，使用static方法创建对象，根据不同参数返回不同实例，每增加一个对象需要修改工厂类，违背了<strong>开闭原则</strong>。</p>
<ul>
<li>不推荐使用</li>
</ul>
<p>只适用于工厂类负责创建的对象较少的场景，且客户端只需要传入工厂类的参数，对于如何创建对象不需要关心。</p>
<p>一旦有了新的实现类，就需要修改工厂实现，有可能造成工厂逻辑过于复杂，不利于系统的扩展和维护。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230606151632827-1055606085.jpg" alt="img"></p>
<h2 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h2><blockquote>
<p>定义一个用于创建对象的接口，让子类决定将哪一个类实例化，此模式使一个类的<strong>实例化延迟到其子类</strong>。</p>
<ul>
<li>但是工厂方法会导致类的个数过多，增加复杂度，增加系统的抽象性和理解难度。</li>
</ul>
<p>它可以创建一个工厂接口和多个工厂实现类，这样如果增加新的功能，只需要添加新的工厂类就可以，不需要修改之前的代码。</p>
<p>另外，工厂方法模式还可以和模板方法模式结合一起，将他们共同的基础逻辑抽取到父类中，其它的交给子类去实现。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230606151415021-312208668.jpg" alt="img"></p>
<p><strong>代码体现</strong></p>
<blockquote>
<p>某平台先拥有Java和Python学习视频，将来需要拓展业务开放FE(前端)视频学习。</p>
</blockquote>
<p><img src="/images/image-20231007150732447.png" alt="image-20231007150732447"></p>
<pre><code class="java">public abstract class Video &#123;
    public abstract void produce();
&#125;
</code></pre>
<pre><code class="java">public class JavaVideo extends Video &#123;
    @Override
    public void produce() &#123;
        System.out.println(&quot;录制Java课程视频&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class PythonVideo extends Video &#123;
    @Override
    public void produce() &#123;
        System.out.println(&quot;录制Python课程视频&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">public abstract class VideoFactory &#123;
    public abstract Video getVideo();
&#125;
</code></pre>
<pre><code class="java">public class JavaVideoFactory extends VideoFactory &#123;
    public Video getVideo() &#123;
        return new JavaVideo();
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class PythonVideoFactory extends VideoFactory &#123;
    public Video getVideo() &#123;
        return new PythonVideo();
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class Test &#123;
    public static void main(String[] args) &#123;
        VideoFactory videoFactory = new JavaVideoFactory();
        Video video = videoFactory.getVideo();
        video.produce();
        System.out.println(video);
    &#125;
&#125;
</code></pre>
<blockquote>
<p>当拓展业务时，可以仿照<code>Java</code>与<code>Python</code>，可以直接添加<code>FEVideo</code>与<code>FEVideoFactory</code>，可以体现出开放封闭原则。</p>
</blockquote>
<h2 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h2><blockquote>
<p>提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类，用于创建一个产品族的产品。</p>
<p>工厂方法模式和抽象工厂模式，它们之间最大的区别在于：</p>
<ul>
<li>工厂方法模式只有一个抽象产品类，具体工厂类只能创建一个具体产品类的实例。</li>
<li>抽象工厂模式有多个抽象产品类，具体工厂类可以创建多个具体产品类的实例。</li>
</ul>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230606172710556-547590722.jpg" alt="img"></p>
<h1 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h1><blockquote>
<p>将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</p>
<p>构造器模式使用多个简单的对象一步一步构建成一个复杂的对象。</p>
<p>它提供了一种创建对象的最佳方式。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230914140953582-1620306965.jpg" alt="img"></p>
<h1 id="桥接模式"><a href="#桥接模式" class="headerlink" title="桥接模式"></a>桥接模式</h1><blockquote>
<p>桥接模式就是把抽象和实现分离出来，然后中间通过<strong>组合</strong>来搭建他们之间的桥梁。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230831103224431-1474472057.jpg" alt="img"></p>
<p><strong>代码实现</strong></p>
<blockquote>
<p>中国有很多银行，有中国农业银行和中国工商银行，关于账号，有定期账号和活期账号，一个就是银行一个账号。</p>
</blockquote>
<pre><code class="java">public interface Account &#123;
    /** 打开我们的账号，打开账号，就要返回账号 */
    Account openAccount();
    
    /** 打开我们的账号，查看为什么账户类型，是定期类型还是活期类型 */
    void showAccountType();

&#125;
</code></pre>
<pre><code class="java">/** 定期的账号 */
public class DepositAccount implements Account &#123;
    @Override
    public Account openAccount() &#123;
        System.out.println(&quot;定期账号&quot;);
        return new DepositAccount();
    &#125;

    @Override
    public void showAccountType() &#123;
        System.out.println(&quot;这是一个定期账号&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">/** 活期账号 */
public class SavingAccount implements Account &#123;
    @Override
    public Account openAccount() &#123;
        System.out.println(&quot;打开活期账号&quot;);
        return new SavingAccount();
    &#125;

    @Override
    public void showAccountType() &#123;
        System.out.println(&quot;这是一个活期账号&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">public abstract class Bank &#123;
    /** 只有子类能拿到这个Account的这个接口 */
    protected Account account;

    /** 组合的时候，可以通过构造器的方式来进行注入也可以通过set方法的方式来进行注入 */
    public Bank(Account account) &#123;
        this.account = account;
    &#125;

    /** 这里声明成和接口里面的方法名一致，只是方便理解，Bank里面的方法要委托给Account接口里面的方法 */
    abstract Account openAccount();

&#125;
</code></pre>
<pre><code class="java">public class ABCBank extends Bank &#123;
    /**
     * 组合的时候，可以通过构造器的方式来进行注入也可以通过set方法的方式来进行注入
     *
     * @param account
     */
    public ABCBank(Account account) &#123;
        super(account);
    &#125;

    @Override
    Account openAccount() &#123;
        System.out.println(&quot;打开中国农业银行账号&quot;);
        return account;
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class ICBCBank extends Bank &#123;
    /**
     * 组合的时候，可以通过构造器的方式来进行注入也可以通过set方法的方式来进行注入
     *
     * @param account
     */
    public ICBCBank(Account account) &#123;
        super(account);
    &#125;

    @Override
    Account openAccount() &#123;
        System.out.println(&quot;打开中国工商银行账号&quot;);
        return account;
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class Test &#123;
    public static void main(String[]args)&#123;
        Bank icbcBank = new ICBCBank(new DepositAccount());
        Account icbcAccount = icbcBank.openAccount();
        icbcAccount.showAccountType();

        Bank icbcBank2 = new ICBCBank(new SavingAccount());
        Account icbcAccount2 = icbcBank2.openAccount();
        icbcAccount2.showAccountType();

        Bank abcBank = new ABCBank(new SavingAccount());
        Account abcAccount = abcBank.openAccount();
        abcAccount.showAccountType();
    &#125;
&#125;
</code></pre>
<h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><blockquote>
<p>单例模式就是在程序运行中只实例化一次，创建一个全局唯一对象。</p>
</blockquote>
<p><strong>饿汉模式</strong></p>
<pre><code class="java">//在类加载时就完成了初始化，所以类加载较慢，但获取对象的速度快
public class SingletonObject &#123;
    // 利用静态变量来存储唯一实例
    private static final SingletonObject instance = new SingletonObject();
 
    // 私有化构造函数
    private SingletonObject()&#123;
        // 里面可能有很多操作
    &#125;
 
    // 提供公开获取实例接口
    public static SingletonObject getInstance()&#123;
        return instance;
    &#125;
&#125;
</code></pre>
<p>饿汉模式优缺点:</p>
<blockquote>
<p>缺点：</p>
<ul>
<li>不能实现懒加载，造成空间浪费，如果一个类比较大，我们在初始化的时就加载了这个类，但是我们长时间没有使用这个类，这就导致了内存空间的浪费。</li>
</ul>
</blockquote>
<p><strong>懒汉模式</strong></p>
<p>在程序初始化时不会创建实例，只有在使用实例的时候才会创建实例，所以懒汉模式解决了饿汉模式带来的空间浪费问题。</p>
<pre><code class="java">public class SingletonObject &#123;
    // 定义静态变量时，未初始化实例
    private static SingletonObject instance;
 
    // 私有化构造函数
    private SingletonObject()&#123;
 
    &#125;
 
    public static SingletonObject getInstance()&#123;
        // 使用时，先判断实例是否为空，如果实例为空，则实例化对象
        // 这段代码在多线程的情况下是不安全的
        if (instance == null)
            instance = new SingletonObject();
        return instance;
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class SingletonObject &#123;
    private static SingletonObject instance;
 
    private SingletonObject()&#123;
 
    &#125;
 
    public synchronized static SingletonObject getInstance()&#123;
        /**
         * 添加class类锁，影响了性能，加锁之后将代码进行了串行化
         * 我们的代码块绝大部分是读操作，在读操作的情况下，代码线程是安全的
         */
        if (instance == null)
            instance = new SingletonObject();
        return instance;
    &#125;
&#125;
</code></pre>
<p>懒汉模式的优缺点:</p>
<blockquote>
<p>优点:</p>
<ul>
<li>实现了懒加载，节约了内存空间</li>
</ul>
<p>缺点:</p>
<ul>
<li>在不加锁的情况下，线程不安全，可能出现多份实例</li>
<li>在加锁的情况下，会是程序串行化，使系统有严重的性能问题</li>
</ul>
</blockquote>
<p><strong>双重检查锁模式</strong></p>
<pre><code class="java">public class SingletonObject &#123;
    private static SingletonObject instance;
 
    private SingletonObject()&#123;
 
    &#125;
 
    public static SingletonObject getInstance()&#123;
 
        // 第一次判断，如果这里为空，不进入抢锁阶段，直接返回实例
        if (instance == null)
            synchronized (SingletonObject.class)&#123;
                // 抢到锁之后再次判断是否为空
                if (instance == null)&#123;
                    instance = new SingletonObject();
                &#125;
            &#125;
 
        return instance;
    &#125;
&#125;
</code></pre>
<p>在多线程的情况下，可能会出现<strong>空指针问题</strong>，出现问题的原因是JVM在实例化对象的时候会进行优化和指令重排序操作。</p>
<pre><code class="java">    private SingletonObject()&#123;
     1   int x = 10;
     2   int y = 30;
     3  Object o = new Object();
                
    &#125;
</code></pre>
<p>我们编写的顺序是1、2、3，JVM 会对它进行指令重排序，所以执行顺序可能是3、1、2，也可能是2、3、1，不管是那种执行顺序，JVM 最后都会保证所以实例都完成实例化。 </p>
<blockquote>
<p>如果构造函数中操作比较多时，为了提升效率，JVM 会在构造函数里面的属性未全部完成实例化时，就返回对象。</p>
<p>双重检测锁出现空指针问题的原因就是出现在这里，当某个线程获取锁进行实例化时，其他线程就直接获取实例使用，由于JVM指令重排序的原因，其他线程获取的对象也许不是一个完整的对象，所以在使用实例的时候就会出现空指针异常问题。</p>
</blockquote>
<p>要解决双重检查锁模式带来空指针异常的问题，只需要使用<code>volatile</code>关键字。</p>
<pre><code class="java">    // 添加volatile关键字
    private static volatile SingletonObject instance;
 
    private SingletonObject()&#123;
 
    &#125;
 
    public static SingletonObject getInstance()&#123;
 
        if (instance == null)
            synchronized (SingletonObject.class)&#123;
                if (instance == null)&#123;
                    instance = new SingletonObject();
                &#125;
            &#125;
 
        return instance;
    &#125;
&#125;
</code></pre>
<p><strong>静态内部类单例模式</strong></p>
<p>静态内部类单例模式实例由内部类创建，由于 JVM 在加载外部类的过程中, 是不会加载静态内部类的, 只有内部类的属性&#x2F;方法被调用时才会被加载, 并初始化其静态属性。</p>
<p>静态属性由<code>static</code>修饰，保证只被实例化一次，并且严格保证实例化顺序。</p>
<pre><code class="java">public class SingletonObject &#123;
 
 
    private SingletonObject()&#123;
 
    &#125;
    // 单例持有者
    private static class InstanceHolder&#123;
        private  final static SingletonObject instance = new SingletonObject();
 
    &#125;
    
    // 
    public static SingletonObject getInstance()&#123;
        // 调用内部类属性
        return InstanceHolder.instance;
    &#125;
&#125;
</code></pre>
<p><strong>枚举类单例模式</strong></p>
<p>枚举类型是线程安全的，并且只会装载一次，设计者充分的利用了枚举的这个特性来实现单例模式，枚举的写法非常简单，而且枚举类型是所用单例实现中唯一一种不会被破坏的单例实现模式。</p>
<pre><code class="java">public class SingletonObject &#123;
 
 
    private SingletonObject()&#123;
 
    &#125;
 
    /**
     * 枚举类型是线程安全的，并且只会装载一次
     */
    private enum Singleton&#123;
        INSTANCE;
 
        private final SingletonObject instance;
 
        Singleton()&#123;
            instance = new SingletonObject();
        &#125;
 
        private SingletonObject getInstance()&#123;
            return instance;
        &#125;
    &#125;
 
    public static SingletonObject getInstance()&#123;
 
        return Singleton.INSTANCE.getInstance();
    &#125;
&#125;
</code></pre>
<p><strong>破坏单例模式的方法及解决办法</strong></p>
<p>除枚举方式外，其他方法都会通过反射的方式破坏单例，反射是通过调用构造方法生成新的对象，所以如果我们想要阻止单例破坏，可以在构造方法中进行判断，若已有实例, 则阻止生成新的实例。</p>
<pre><code class="java">private SingletonObject()&#123;
    if (instance !=null)&#123;
        throw new RuntimeException(&quot;实例已经存在，请通过 getInstance()方法获取&quot;);
    &#125;
&#125;
</code></pre>
<p>如果单例类实现了序列化接口Serializable, 就可以通过反序列化破坏单例，所以我们可以不实现序列化接口，如果非得实现序列化接口，可以重写反序列化方法readResolve(), 反序列化时直接返回相关单例对象。</p>
<pre><code class="java">  public Object readResolve() throws ObjectStreamException &#123;
        return instance;
    &#125;
</code></pre>
<h1 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h1><blockquote>
<p>定义了一系列算法，并将每个算法封装起来，使它们可以相互替换，且算法的变化不会影响使用算法的客户。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230920094436366-1512364592.jpg" alt="img"></p>
<h1 id="模板方法模式"><a href="#模板方法模式" class="headerlink" title="模板方法模式"></a>模板方法模式</h1><blockquote>
<p>定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。</p>
<p>Template Method使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</p>
<p>在模板模式中，一个抽象类公开定义了执行它的方法的方式&#x2F;模板。</p>
<p>它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。</p>
<p>简单来说，有多个子类共有的方法，且逻辑相同，可以考虑作为模板方法。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230926085751892-1595713073.jpg" alt="img"></p>
<h1 id="访问者模式"><a href="#访问者模式" class="headerlink" title="访问者模式"></a>访问者模式</h1><blockquote>
<p>表示一个作用于某对象结构中的各元素的操作。</p>
<p>它使你可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230927100141283-705682739.jpg" alt="img"></p>
<h1 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h1><blockquote>
<p>适配器模式它将不兼容的接口转换为可兼容的接口，让原本由于接口不兼容而不能一起工作的类可以一起工作。</p>
<p>适配器模式有两种实现方式：类适配器和对象适配器。</p>
<ul>
<li>类适配器使用继承关系来实现，对象适配器使用组合关系来实现。</li>
</ul>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230831103205994-1079579250.jpg" alt="img"></p>
<p><strong>代码实现</strong></p>
<blockquote>
<p>ITarget 表示要转化成的接口定义。</p>
<p>Adaptee 是一组不兼容 ITarget 接口定义的接口，Adaptor 将 Adaptee 转化成一组符合 ITarget 接口定义的接口。</p>
</blockquote>
<pre><code class="java">// 类适配器: 基于继承
public interface ITarget &#123;
  void f1();
  void f2();
  void fc();
&#125;
public class Adaptee &#123;
  public void fa() &#123; //... &#125;
  public void fb() &#123; //... &#125;
  public void fc() &#123; //... &#125;
&#125;
public class Adaptor extends Adaptee implements ITarget &#123;
  public void f1() &#123;
    super.fa();
  &#125;
  
  public void f2() &#123;
    //...重新实现f2()...
  &#125;
  
  // 这里fc()不需要实现，直接继承自Adaptee，这是跟对象适配器最大的不同点
&#125;
    

// 对象适配器：基于组合
public interface ITarget &#123;
  void f1();
  void f2();
  void fc();
&#125;
public class Adaptee &#123;
  public void fa() &#123; //... &#125;
  public void fb() &#123; //... &#125;
  public void fc() &#123; //... &#125;
&#125;
public class Adaptor implements ITarget &#123;
  private Adaptee adaptee;
  
  public Adaptor(Adaptee adaptee) &#123;
    this.adaptee = adaptee;
  &#125;
  
  public void f1() &#123;
    adaptee.fa(); //委托给Adaptee
  &#125;
  
  public void f2() &#123;
    //...重新实现f2()...
  &#125;
  
  public void fc() &#123;
    adaptee.fc();
  &#125;
&#125;
</code></pre>
<p><strong>如何选择</strong></p>
<blockquote>
<p>如果 Adaptee 接口并不多，那两种实现方式都可以。</p>
<p>如果 Adaptee 接口很多，而且 Adaptee 和 ITarget 接口定义大部分都相同，那推荐使用类适配器。</p>
<ul>
<li>因为 Adaptor 复用父类 Adaptee 的接口，比起对象适配器的实现方式，Adaptor 的代码量要少一些。</li>
</ul>
<p>如果 Adaptee 接口很多，而且 Adaptee 和 ITarget 接口定义大部分都不相同，那推荐使用对象适配器。</p>
<ul>
<li>因为组合结构相对于继承更加灵活。</li>
</ul>
</blockquote>
<p><strong>应用场景</strong></p>
<p>封装有缺陷的接口设计:</p>
<blockquote>
<p>假设依赖的外部系统在接口设计方面有缺陷（比如包含大量静态方法），引入之后会影响到自身代码的可测试性。</p>
<p>为了隔离设计上的缺陷，希望对外部系统提供的接口进行二次封装，抽象出更好的接口设计，这个时候就可以使用适配器模式了。</p>
</blockquote>
<p>统一多个类的接口设计:</p>
<blockquote>
<p>假设系统要对用户输入的文本内容做敏感词过滤，为了提高过滤的召回率，引入了多款第三方敏感词过滤系统，依次对用户输入的内容进行过滤，过滤掉尽可能多的敏感词。</p>
<p>但是，每个系统提供的过滤接口都是不同的，这就意味着没法复用一套逻辑来调用各个系统。</p>
<p>这个时候，就可以使用适配器模式，将所有系统的接口适配为统一的接口定义，这样可以复用调用敏感词过滤的代码。</p>
</blockquote>
<h1 id="代理模式"><a href="#代理模式" class="headerlink" title="代理模式"></a>代理模式</h1><blockquote>
<p>代理模式提供了对目标对象额外的访问方式，即通过代理对象访问目标对象。</p>
<ul>
<li>这样可以在不修改原目标对象的前提下，提供额外的功能操作，扩展目标对象的功能。</li>
</ul>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230914153758501-824947124.jpg" alt="img"></p>
<h2 id="静态代理"><a href="#静态代理" class="headerlink" title="静态代理"></a>静态代理</h2><blockquote>
<p>在编译时就已经实现，编译完成后代理类是一个实际的class文件。</p>
</blockquote>
<p><strong>使用方式</strong></p>
<blockquote>
<p>创建一个接口，然后创建被代理的类实现该接口并且实现该接口中的抽象方法。</p>
<p>之后再创建一个代理类，同时使其也实现这个接口，在代理类中持有一个被代理对象的引用，而后在代理类方法中调用该对象的方法。</p>
</blockquote>
<pre><code class="java">public interface UserDao &#123;    
  void save();     
&#125;
</code></pre>
<pre><code class="java">public class UserDaoImpl implements UserDao &#123;
    @Override
    public void save() &#123;
        System.out.println(&quot;正在保存用户...&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class TransactionHandler implements UserDao &#123;
    //目标代理对象
    private UserDao target;
    //构造代理对象时传入目标对象
    public TransactionHandler(UserDao target) &#123;
        this.target = target;
    &#125;
    @Override
    public void save() &#123;
        //调用目标方法前的处理
        System.out.println(&quot;开启事务控制...&quot;);
        //调用目标对象的方法
        target.save();
        //调用目标方法后的处理
        System.out.println(&quot;关闭事务控制...&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">public class Main &#123;
    public static void main(String[] args) &#123;
        //新建目标对象
        UserDaoImpl target = new UserDaoImpl();
        //创建代理对象, 并使用接口对其进行引用
        UserDao userDao = new TransactionHandler(target);
        //针对接口进行调用
        userDao.save();
    &#125;
&#125;
</code></pre>
<blockquote>
<p>使用JDK静态代理很容易就完成了对一个类的代理操作。</p>
<p>但是<code>JDK</code>静态代理的缺点也暴露了出来：</p>
<ul>
<li>由于代理只能为一个类服务，如果需要代理的类很多，那么就需要编写大量的代理类，比较繁琐。</li>
</ul>
</blockquote>
<h2 id="动态代理"><a href="#动态代理" class="headerlink" title="动态代理"></a>动态代理</h2><p><strong>JDK动态代理</strong></p>
<blockquote>
<p><strong>使用JDK动态代理的五大步骤：</strong></p>
<ul>
<li>通过实现InvocationHandler接口来自定义自己的InvocationHandler</li>
<li>通过<code>Proxy.getProxyClass</code>获得动态代理类</li>
<li>通过反射机制获得代理类的构造方法，方法签名为<code>getConstructor(InvocationHandler.class)</code></li>
<li>通过构造函数获得代理对象并将自定义的<code>InvocationHandler</code>实例对象传为参数传入</li>
<li>通过代理对象调用目标方法</li>
</ul>
</blockquote>
<pre><code class="java">public interface IHello &#123;
    void sayHello();
&#125;
</code></pre>
<pre><code class="java"> public class HelloImpl implements IHello &#123;
    @Override
    public void sayHello() &#123;
        System.out.println(&quot;Hello world!&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
 
public class MyInvocationHandler implements InvocationHandler &#123;
 
    /** 目标对象 */
    private Object target;
 
    public MyInvocationHandler(Object target)&#123;
        this.target = target;
    &#125;
 
    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;
        System.out.println(&quot;------插入前置通知代码-------------&quot;);
        // 执行相应的目标方法
        Object rs = method.invoke(target,args);
        System.out.println(&quot;------插入后置处理代码-------------&quot;);
        return rs;
    &#125;
&#125;
</code></pre>
<pre><code class="java">import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Proxy;
 
public class MyProxyTest &#123;
    public static void main(String[] args)
            throws NoSuchMethodException, IllegalAccessException, InstantiationException, InvocationTargetException &#123;
        // =========================第一种==========================
        // 1、生成$Proxy0的class文件
        System.getProperties().put(&quot;sun.misc.ProxyGenerator.saveGeneratedFiles&quot;, &quot;true&quot;);
        // 2、获取动态代理类
        Class proxyClazz = Proxy.getProxyClass(IHello.class.getClassLoader(),IHello.class);
        // 3、获得代理类的构造函数，并传入参数类型InvocationHandler.class
        Constructor constructor = proxyClazz.getConstructor(InvocationHandler.class);
        // 4、通过构造函数来创建动态代理对象，将自定义的InvocationHandler实例传入
        IHello iHello1 = (IHello) constructor.newInstance(new MyInvocationHandler(new HelloImpl()));
        // 5、通过代理对象调用目标方法
        iHello1.sayHello();
 
        // ==========================第二种=============================
        /**
         * Proxy类中还有个将2~4步骤封装好的简便方法来创建动态代理对象，
         *其方法签名为：newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] instance, InvocationHandler h)
         */
        IHello  iHello2 = (IHello) Proxy.newProxyInstance(IHello.class.getClassLoader(), // 加载接口的类加载器
                new Class[]&#123;IHello.class&#125;, // 一组接口
                new MyInvocationHandler(new HelloImpl())); // 自定义的InvocationHandler
        iHello2.sayHello();
    &#125;
&#125;
</code></pre>
<blockquote>
<p><strong>JDK静态代理与JDK动态代理不同之处：</strong> </p>
<p>在静态代理中我们需要对哪个接口和哪个被代理类创建代理类，所以在编译前就需要代理类实现与被代理类相同的接口，并且直接在实现的方法中调用被代理类相应的方法。</p>
<p>但是动态代理不知道要针对哪个接口、哪个被代理类创建代理类，因为它是在运行时被创建的。</p>
</blockquote>
<p><strong>CGLIB</strong></p>
<blockquote>
<p>CGLIB包的底层是通过使用一个小而快的字节码处理框架<code>ASM</code>，来转换字节码并生成新的类。</p>
</blockquote>
<blockquote>
<p><strong>CGLIB代理实现如下：</strong></p>
<ul>
<li>首先实现一个MethodInterceptor，方法调用会被转发到该类的intercept()方法。</li>
<li>然后在需要使用的时候，通过CGLIB动态代理获取代理对象。</li>
</ul>
</blockquote>
<pre><code class="java"> public class HelloService &#123;
 
    public HelloService() &#123;
        System.out.println(&quot;HelloService构造&quot;);
    &#125;
 
    /**
     * 该方法不能被子类覆盖,Cglib是无法代理final修饰的方法的
     */
    final public String sayOthers(String name) &#123;
        System.out.println(&quot;HelloService:sayOthers&gt;&gt;&quot;+name);
        return null;
    &#125;
 
    public void sayHello() &#123;
        System.out.println(&quot;HelloService:sayHello&quot;);
    &#125;
&#125;
</code></pre>
<pre><code class="java">import net.sf.cglib.proxy.MethodInterceptor;
import net.sf.cglib.proxy.MethodProxy;
 
import java.lang.reflect.Method;
 
/**
 * 自定义MethodInterceptor
 */
public class MyMethodInterceptor implements MethodInterceptor&#123;
 
    /**
     * sub：cglib生成的代理对象
     * method：被代理对象方法
     * objects：方法入参
     * methodProxy: 代理方法
     */
    @Override
    public Object intercept(Object sub, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123;
        System.out.println(&quot;======插入前置通知======&quot;);
        Object object = methodProxy.invokeSuper(sub, objects);
        System.out.println(&quot;======插入后者通知======&quot;);
        return object;
    &#125;
&#125;
</code></pre>
<pre><code class="java">import net.sf.cglib.core.DebuggingClassWriter;
import net.sf.cglib.proxy.Enhancer;
 
public class Client &#123;
    public static void main(String[] args) &#123;
        // 代理类class文件存入本地磁盘方便我们反编译查看源码
        System.setProperty(DebuggingClassWriter.DEBUG_LOCATION_PROPERTY, &quot;D:\\code&quot;);
        // 通过CGLIB动态代理获取代理对象的过程
        Enhancer enhancer = new Enhancer();
        // 设置enhancer对象的父类
        enhancer.setSuperclass(HelloService.class);
        // 设置enhancer的回调对象
        enhancer.setCallback(new MyMethodInterceptor());
        // 创建代理对象
        HelloService proxy= (HelloService)enhancer.create();
        // 通过代理对象调用目标方法
        proxy.sayHello();
    &#125;
&#125;
</code></pre>
<blockquote>
<p>JDK代理要求被代理的类必须实现接口，有很强的局限性。</p>
<p><code>CGLIB</code>会让生成的代理类继承被代理类，并在代理类中对代理方法进行强化处理(前置处理、后置处理等)。</p>
</blockquote>
<p><strong>CGLIB在进行代理的时候都进行了哪些工作</strong></p>
<blockquote>
<p>生成的代理类继承被代理类：</p>
<ul>
<li>如果委托类被final修饰，那么它不可被继承，即不可被代理</li>
<li>同样，如果委托类中存在final修饰的方法，那么该方法也不可被代理</li>
</ul>
<p>代理类会为委托方法生成两个方法：</p>
<ul>
<li>一个是与委托方法签名相同的方法，它在方法中会通过<code>super</code>调用委托方法</li>
<li>另一个是代理类独有的方法</li>
</ul>
<p>当执行代理对象的方法时，会首先判断一下是否存在实现了<code>MethodInterceptor</code>接口的<code>CGLIB$CALLBACK_0</code>，如果存在，则将调用<code>MethodInterceptor</code>中的<code>intercept</code>方法。</p>
<ul>
<li>在<code>intercept</code>方法中，除了会调用委托方法，还会进行一些增强操作。</li>
</ul>
<p>在Spring AOP中，典型的应用场景就是在某些敏感方法执行前后进行操作日志记录。</p>
</blockquote>
<p>在CGLIB中，方法的调用并不是通过反射来完成的，而是直接对方法进行调用：</p>
<blockquote>
<p>通过<strong>FastClass机制</strong>对Class对象进行特别的处理。</p>
<p>比如将会用数组保存method的引用，每次调用方法的时候都是通过一个index下标来保持对方法的引用。</p>
</blockquote>
<p><strong>Fastclass机制</strong></p>
<blockquote>
<p>CGLIB采用了FastClass的机制来实现对被拦截方法的调用。</p>
<p>FastClass机制就是对一个类的方法建立索引，通过索引来直接调用相应的方法。</p>
</blockquote>
<p><strong>三种代理方式之间对比</strong></p>
<table>
<thead>
<tr>
<th align="left">代理方式</th>
<th align="left">实现</th>
<th align="left">优点</th>
<th align="left">缺点</th>
<th align="left">特点</th>
</tr>
</thead>
<tbody><tr>
<td align="left">JDK静态代理</td>
<td align="left">代理类与委托类实现同一接口，并且在代理类中需要硬编码接口</td>
<td align="left">实现简单，容易理解</td>
<td align="left">代理类需要硬编码接口，在实际应用中可能会导致重复编码，浪费存储空间并且效率很低</td>
<td align="left">好像没啥特点</td>
</tr>
<tr>
<td align="left">JDK动态代理</td>
<td align="left">代理类与委托类实现同一接口，主要是通过代理类实现InvocationHandler并重写<code>invoke</code>方法来进行动态代理的，在invoke方法中将对方法进行增强处理</td>
<td align="left">不需要硬编码接口，代码复用率高</td>
<td align="left">只能够代理实现了接口的委托类</td>
<td align="left">底层使用反射机制进行方法的调用</td>
</tr>
<tr>
<td align="left">CGLIB动态代理</td>
<td align="left">代理类将委托类作为自己的父类并为其中的非final委托方法创建两个方法，一个是与委托方法签名相同的方法，它在方法中会通过<code>super</code>调用委托方法；另一个是代理类独有的方法。在代理方法中，它会判断是否存在实现了<code>MethodInterceptor</code>接口的对象，若存在则将调用intercept方法对委托方法进行代理</td>
<td align="left">可以在运行时对类或者是接口进行增强操作，且委托类无需实现接口</td>
<td align="left">不能对<code>final</code>类以及final方法进行代理</td>
<td align="left">底层将方法全部存入一个数组中，通过数组索引直接进行方法调用</td>
</tr>
</tbody></table>
<p><strong>CGlib比JDK快？</strong></p>
<blockquote>
<p>使用CGLiB实现动态代理，CGLib底层采用ASM字节码生成框架，使用字节码技术生成代理类，在JDK6之前比使用Java反射效率要高。</p>
<ul>
<li>唯一需要注意的是，CGLib不能对声明为Final的方法进行代理， 因为CGLib原理是动态生成被代理类的子类。</li>
</ul>
<p>在JDK6、JDK7、JDK8逐步对JDK动态代理优化之后，在调用次数较少的情况下，JDK代理效率高于CGLIB代理效率。</p>
<p>只有当进行大量调用的时候，JDK6和JDK7比CGLIB代理效率低一点，但是到JDK8的时候，JDK代理效率高于CGLIB代理。</p>
<ul>
<li>总之，每一次JDK版本升级，JDK代理效率都得到提升。</li>
</ul>
</blockquote>
<p><strong>Spring如何选择用JDK还是CGLIB？</strong></p>
<blockquote>
<p>当Bean实现接口时，Spring就会用JDK的动态代理。</p>
<p>当Bean没有实现接口时，Spring使用CGlib实现。</p>
<p>可以强制使用CGlib。</p>
</blockquote>
<h1 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h1><blockquote>
<p>用原型实例指定创建对象的种类，并且通过拷贝这个原型来创建新的对象。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230606204804650-1464777117.jpg" alt="img"></p>
<h1 id="组合模式"><a href="#组合模式" class="headerlink" title="组合模式"></a>组合模式</h1><blockquote>
<p>将对象组合成树形结构以表示<strong>部分-整体</strong>的层次结构，它使得客户对单个对象和复合对象的使用具有一致性。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230831103240117-205749072.jpg" alt="img"></p>
<h1 id="装饰器模式"><a href="#装饰器模式" class="headerlink" title="装饰器模式"></a>装饰器模式</h1><blockquote>
<p>动态地给一个对象添加一些额外的职责，就扩展功能而言，它比生成子类方式更为灵活。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230831103257520-898087213.jpg" alt="img"></p>
<h1 id="外观模式"><a href="#外观模式" class="headerlink" title="外观模式"></a>外观模式</h1><blockquote>
<p>为子系统中的一组接口提供一个一致的界面，Facade模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</p>
<p>外观模式Fcade不一定是接口，也可以是类，例如只有FacadeImpl这个类。</p>
<ul>
<li><p>Interface1、Interface2、Interface3都是子系统接口。</p>
</li>
<li><p>使用Facade即可实现对3个子系统的调用。</p>
</li>
</ul>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230831103359436-904889205.jpg" alt="img"></p>
<h1 id="享元模式"><a href="#享元模式" class="headerlink" title="享元模式"></a>享元模式</h1><blockquote>
<p>运用共享技术来有效地支持大量细粒度对象的复用。</p>
<p>它通过共享已经存在的对象来大幅度减少需要创建的对象数量、避免大量相似类的开销，从而提高系统资源的利用率。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230830175441414-1363616129.jpg" alt="img"></p>
<h1 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h1><blockquote>
<p>解除请求的发送者和接收者之间耦合，而使多个对象都有机会处理这个请求。</p>
<p>将这些对象连成一条链，并沿着这条链传递该请求，直到有一个对象处理它。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230915092257430-437991004.jpg" alt="img"></p>
<h1 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h1><blockquote>
<p>将一个请求封装为一个命令对象，使发出请求、执行请求解耦。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230919150517686-439770634.jpg" alt="img"></p>
<h1 id="解释器模式"><a href="#解释器模式" class="headerlink" title="解释器模式"></a>解释器模式</h1><blockquote>
<p>给定一个语言，定义它的文法的一种表示，并定义一个解释器，该解释器使用该表示来解释语言中的句子。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230919154710458-1297410100.jpg" alt="img"></p>
<h1 id="迭代器模式"><a href="#迭代器模式" class="headerlink" title="迭代器模式"></a>迭代器模式</h1><blockquote>
<p>提供一种方法顺序访问一个聚合对象中各个元素，而又不需暴露该对象的内部表示。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230919163249776-2016165829.jpg" alt="img"></p>
<h1 id="中介者模式"><a href="#中介者模式" class="headerlink" title="中介者模式"></a>中介者模式</h1><blockquote>
<p>用一个中介对象来封装一系列的对象交互。</p>
<p>中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230919170424855-294789495.jpg" alt="img"></p>
<h1 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h1><blockquote>
<p>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。</p>
<ul>
<li>这样以后就可将该对象恢复到保存的状态。</li>
</ul>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230919174335017-2143959043.jpg" alt="img"></p>
<h1 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h1><blockquote>
<p>定义对象间的一种一对多的依赖关系，以便当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并自动刷新。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230919182438331-669861037.jpg" alt="img"></p>
<h1 id="状态模式"><a href="#状态模式" class="headerlink" title="状态模式"></a>状态模式</h1><blockquote>
<p>允许一个对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它所属的类。</p>
</blockquote>
<p><strong>UML类图：</strong></p>
<p><img src="/images/584866-20230920094357489-1654905154.jpg" alt="img"></p>

	</div>
</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="/2023/10/07/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  实用工具
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/2023/10/07/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/CSS/">
                CSS
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>




<script>

    //document.oncontextmenu=new Function("event.returnValue=false");
	//document.onselectstart=new Function("event.returnValue=false");

	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?7eeb54583579fabc0878be210d6ad60a";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();

	

	$(function () {
		const btw = new BTWPlugin();
	    btw.init({
	        id: 'container',
	        blogId: '22377-1705888769271-269',
	        name: '月伴飞鱼',
	        qrcode: '/小程序码.jpg',
	        keyword: '验证码',
	        btnText: '为防止机器刷接口，需要完成人机检测',
        	cookieAge: 1
	    });

	    var contents = document.getElementsByClassName("content999");
	    //监听文章内容的copy事件
	    contents[0].addEventListener('copy',function(e){
	        setClipboardText(e);
	    });

	    function setClipboardText(event){
	        // clipboardData 对象是为通过编辑菜单、快捷菜单和快捷键执行的编辑操作所保留的，也就是你复制或者剪切内容
	        let clipboardData = event.clipboardData || window.clipboardData;

	        // 如果未复制或者未剪切，则return出去
	        if (!clipboardData) { return; }

	        event.preventDefault();

	        // Selection 对象，表示用户选择的文本范围或光标的当前位置。
	        // 声明一个变量接收 -- 用户输入的剪切或者复制的文本转化为字符串
	        let text = window.getSelection().toString();
	    
	        if (text) {
	            // 如果文本存在则先取消文本默认事件
	            event.preventDefault();
	            // 通过调用常clipboardData对象的 setData(format, data) 方法；来设置相关文本
	            // format: 一个DOMString 表示要添加到 drag object的拖动数据的类型。
	            // data: 一个 DOMString表示要添加到 drag object的数据。
	            var copyright = '\n\n'
	            + '\n著作权归作者所有。'
	            + '\n商业转载请联系作者获得授权，非商业转载请注明出处。'
	            + '\n作者: 月伴飞鱼'
	            + '\n原文地址: http://hardyfish.top/2023/10/07/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/'
	    
	            clipboardData.setData('text/plain', text + copyright);
	    
	        }
	    };
	});

	
</script>

<script>
    const btw = new BTWPlugin();
    btw.init({
        id: 'container',
        blogId: '22377-1705888769271-269',
        name: '月伴飞鱼',
        qrcode: '/小程序码.jpg',
        keyword: '验证码',
        btnText: '为防止机器刷接口，需要完成人机检测',
        cookieAge: 1
    });

	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?7eeb54583579fabc0878be210d6ad60a";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
</script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">月伴飞鱼</a> 
	
	
		|
		<span id="busuanzi_container_site_pv">
			PV 180986
		</span>
		|
		<span id="busuanzi_container_site_uv"> 
			UV 10079
		</span>
	
	<br>
	微信搜索 <a href="https://xiaoflyfish.oss-cn-beijing.aliyuncs.com/image/个人公众号.jpg" target="_blank">月伴飞鱼</a> 关注我
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>