<!DOCTYPE html>
<html lang="en" oncontextmenu="return false;">

<head oncontextmenu="return false;">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="baidu-site-verification" content="codeva-QodU0Nk5F7" />
	<meta name="google-site-verification" content="DbSTw8OJwtH5Qei7n8Jnew0YyQ5naPzdLAPiscu7zQE" />
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?7eeb54583579fabc0878be210d6ad60a";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>

	
	<!-- title -->
	
	<title>
	
		Guava | 
	 
	月伴飞鱼
	</title>
	
	<!-- keywords,description -->
	 

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/%E5%A4%B4%E5%83%8F.jpg">
	
  
  	
<link rel="stylesheet" href="/css/main.css">

  	
<link rel="stylesheet" href="/css/reward.css">

	
<link rel="stylesheet" href="/css/jquery.fancybox.min.css">

	
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="/lib/highlight/darcula.css">

	
<link rel="stylesheet" href="/css/clipboard-use.css">


	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">


	
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>


	
<script src="/lib/highlight/highlight.min.js"></script>


	
<script src="https://readmore.openwrite.cn/js/readmore-2.0.js"></script>

	
<script src="/lib/jquery-3.4.1.min.js"></script>

	
<script src="/lib/jquery.pjax.js"></script>


	
<script src="/js/main.js"></script>

	
<script src="/js/jquery.fancybox.min.js"></script>

	
		
<script src="/lib/valine/av-3.0.4-min.js"></script>

		
<script src="/lib/valine/Valine-1.3.10-min.js"></script>

	
	
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	
	
<script src="/js/clipboard.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body oncontextmenu="return false;">
	<header id="header" oncontextmenu="return false;">
    <a id="title" href="/" class="logo">公众号月伴飞鱼</a>

	<ul id="menu">
		<li class="menu-item">
			<a href="/about" class="menu-item-link">关于我</a>
		</li>

		<li class="menu-item">
			<a href="/个人微信.jpeg" class="menu-item-link">联系作者</a>
		</li>

	    <li class="menu-item">
			<a href="/site" class="menu-item-link">关于网站</a>
		</li>

		<li class="menu-item">
			<a href="/个人公众号.jpg" class="menu-item-link" target="_blank">我的公众号</a>
		</li>
		
		<li class="menu-item">
			<a href="https://tech.meituan.com/" class="menu-item-link" target="_blank">
				美团技术团队
			</a>
		</li>
		<li class="menu-item">
			<a href="https://tech.youzan.com/" class="menu-item-link" target="_blank">
				有赞技术团队
			</a>
		</li>
		<!--<li class="menu-item">
			<select class="menu-item-link menu-item-select">
				<option class="menu-item-link"  value="volvo">Volvo</option>
				<option class="menu-item-link"  value="saab">Saab</option>
				<option class="menu-item-link"  value="fiat">Fiat</option>
				<option class="menu-item-link"  value="audi">Audi</option>
			</select>
		</li>-->
	</ul>
</header>

	<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="text" placeholder="按目录搜索一下">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										AI相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/14/AI%E7%9B%B8%E5%85%B3/AIGC/">
										AIGC
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/07/AI%E7%9B%B8%E5%85%B3/Sora/">
										Sora
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/01/AI%E7%9B%B8%E5%85%B3/%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B/">
										提示词工程
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										中间件
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/30/%E4%B8%AD%E9%97%B4%E4%BB%B6/Dubbo/">
										Dubbo
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/19/%E4%B8%AD%E9%97%B4%E4%BB%B6/Elasticsearch/">
										Elasticsearch
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/30/%E4%B8%AD%E9%97%B4%E4%BB%B6/Netty/">
										Netty
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/25/%E4%B8%AD%E9%97%B4%E4%BB%B6/Solr/">
										Solr
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/19/%E4%B8%AD%E9%97%B4%E4%BB%B6/ZooKeeper/">
										ZooKeeper
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										产品相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/02/18/%E4%BA%A7%E5%93%81%E7%9B%B8%E5%85%B3/%E5%B9%BF%E5%91%8A%E4%B8%9A%E5%8A%A1/">
										广告业务
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/18/%E4%BA%A7%E5%93%81%E7%9B%B8%E5%85%B3/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/">
										推荐系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/06/%E4%BA%A7%E5%93%81%E7%9B%B8%E5%85%B3/%E7%94%A8%E6%88%B7%E5%A2%9E%E9%95%BF/">
										用户增长
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										代码思想
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/12/15/%E4%BB%A3%E7%A0%81%E6%80%9D%E6%83%B3/CodeReview/">
										CodeReview
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/02/%E4%BB%A3%E7%A0%81%E6%80%9D%E6%83%B3/%E4%BB%A3%E7%A0%81%E9%87%8D%E6%9E%84/">
										代码重构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										前端相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/CSS/">
										CSS
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/26/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/React/">
										React
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/26/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/Vue/">
										Vue
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/12/%E5%89%8D%E7%AB%AF%E7%9B%B8%E5%85%B3/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">
										小程序
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										基础知识
									</a>
									
							<ul>
								<li class="file">
									<a href="/2022/11/27/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/JVM/">
										JVM
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%88%86%E5%B8%83%E5%BC%8F/">
										分布式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/10/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/">
										并发编程
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">
										设计模式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										大数据相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/02/21/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/DataX/">
										DataX
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/25/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Doris/">
										Doris
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/20/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Flink/">
										Flink
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/21/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Hadoop/">
										Hadoop
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/07/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Hive/">
										Hive
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/23/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/SQOOP/">
										SQOOP
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/20/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%9B%B8%E5%85%B3/Spark/">
										Spark
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										学习专栏
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/02/16/%E5%AD%A6%E4%B9%A0%E4%B8%93%E6%A0%8F/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AD%A6%E6%9E%B6%E6%9E%84/">
										从0开始学架构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/31/%E5%AD%A6%E4%B9%A0%E4%B8%93%E6%A0%8F/%E4%BB%A3%E7%A0%81%E4%B9%8B%E4%B8%91/">
										代码之丑
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/26/%E5%AD%A6%E4%B9%A0%E4%B8%93%E6%A0%8F/%E5%A4%A7%E5%8E%82%E6%99%8B%E5%8D%87%E6%8C%87%E5%8D%97/">
										大厂晋升指南
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/19/%E5%AD%A6%E4%B9%A0%E4%B8%93%E6%A0%8F/%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E5%AD%A6%E4%B9%A0%E9%AB%98%E6%89%8B/">
										如何成为学习高手
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										学习书籍
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/02/05/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/HBase%E4%B8%8D%E7%9D%A1%E8%A7%89%E4%B9%A6/">
										HBase不睡觉书
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/02/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E5%AE%9E%E6%88%98/">
										Java并发编程实战
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/02/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF/">
										Java并发编程的艺术
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/16/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C/">
										Java开发手册
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/11/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/%E4%BA%BF%E7%BA%A7%E6%B5%81%E9%87%8F%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF/">
										亿级流量网站架构核心技术
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/05/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/%E4%BB%A3%E7%A0%81%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/">
										代码整洁之道
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/03/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84/">
										大型网站技术架构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/07/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E7%B3%BB%E7%BB%9F/">
										大型网站系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/06/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA/">
										深入理解Java虚拟机
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/08/%E5%AD%A6%E4%B9%A0%E4%B9%A6%E7%B1%8D/%E8%8B%B1%E8%AF%AD%E9%AD%94%E6%B3%95%E5%B8%88%E4%B9%8B%E8%AF%AD%E6%B3%95%E4%BF%B1%E4%B9%90%E9%83%A8/">
										英语魔法师之语法俱乐部
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										工具相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/11/09/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Arthas/">
										Arthas
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/24/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/ChatGPT/">
										ChatGPT
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/21/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/GIT/">
										GIT
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/21/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Hexo/">
										Hexo
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/21/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/MAC/">
										MAC
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/01/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/Maven/">
										Maven
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/09/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/PlantUML/">
										PlantUML
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/22/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/UTools/">
										UTools
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E5%B7%A5%E5%85%B7%E7%9B%B8%E5%85%B3/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7/">
										实用工具
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										成长相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/31/%E6%88%90%E9%95%BF%E7%9B%B8%E5%85%B3/%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0/">
										技术学习
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/07/%E6%88%90%E9%95%BF%E7%9B%B8%E5%85%B3/%E8%AF%BB%E4%B9%A6%E8%AE%A1%E5%88%92/">
										读书计划
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/09/%E6%88%90%E9%95%BF%E7%9B%B8%E5%85%B3/%E9%9D%A2%E8%AF%95%E7%9B%B8%E5%85%B3/">
										面试相关
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										数据库
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/02/06/%E6%95%B0%E6%8D%AE%E5%BA%93/ClickHouse/">
										ClickHouse
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/27/%E6%95%B0%E6%8D%AE%E5%BA%93/HBase/">
										HBase
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/09/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB/">
										MongoDB
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/02/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">
										MySQL
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/21/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/">
										Redis
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										文章速读
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/03/14/%E6%96%87%E7%AB%A0%E9%80%9F%E8%AF%BB/%E4%BA%AC%E4%B8%9C/">
										京东
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/11/%E6%96%87%E7%AB%A0%E9%80%9F%E8%AF%BB/%E5%AD%97%E8%8A%82/">
										字节
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/13/%E6%96%87%E7%AB%A0%E9%80%9F%E8%AF%BB/%E7%BE%8E%E5%9B%A2/">
										美团
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/10/%E6%96%87%E7%AB%A0%E9%80%9F%E8%AF%BB/%E8%85%BE%E8%AE%AF/">
										腾讯
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/03/10/%E6%96%87%E7%AB%A0%E9%80%9F%E8%AF%BB/%E9%98%BF%E9%87%8C/">
										阿里
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										服务器
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E6%9C%8D%E5%8A%A1%E5%99%A8/Docker/">
										Docker
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/09/%E6%9C%8D%E5%8A%A1%E5%99%A8/Nginx/">
										Nginx
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/03/%E6%9C%8D%E5%8A%A1%E5%99%A8/Tomcat/">
										Tomcat
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/09/%E6%9C%8D%E5%8A%A1%E5%99%A8/%E8%BF%90%E7%BB%B4%E7%9F%A5%E8%AF%86/">
										运维知识
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										架构相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/21/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/DDD/">
										DDD
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/02/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E6%9E%B6%E6%9E%84%E5%9B%BE/">
										架构图
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/02/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E6%9E%B6%E6%9E%84%E5%AD%A6%E4%B9%A0/">
										架构学习
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/26/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E7%B3%BB%E7%BB%9F%E4%BF%9D%E9%9A%9C/">
										系统保障
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/31/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD/">
										系统性能
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/26/%E6%9E%B6%E6%9E%84%E7%9B%B8%E5%85%B3/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/">
										系统设计
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										框架相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/07/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Caffeine/">
										Caffeine
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/2024/01/06/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Guava/">
										Guava
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/15/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/JWT/">
										JWT
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/08/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/MyBatis/">
										MyBatis
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/14/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/RPC%E6%A1%86%E6%9E%B6/">
										RPC框架
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/26/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Seata/">
										Seata
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/03/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/ShardingSphere/">
										ShardingSphere
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/14/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Spring/">
										Spring
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/03/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Thrift/">
										Thrift
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/29/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/XXLJOB/">
										XXLJOB
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6/">
										开源框架
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										消息队列
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/KAFKA/">
										KAFKA
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/20/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RabbitMQ/">
										RabbitMQ
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/07/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/RocketMQ/">
										RocketMQ
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										源码相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/12/13/%E6%BA%90%E7%A0%81%E7%9B%B8%E5%85%B3/RocketMQ/">
										RocketMQ
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										生活相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/27/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E4%B9%A6%E7%B1%8D/">
										书籍
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/12/17/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E5%81%9A%E8%8F%9C/">
										做菜
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/24/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E6%B3%95%E5%BE%8B/">
										法律
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E7%94%B5%E5%BD%B1/">
										电影
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/10/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E7%94%B5%E8%A7%86%E5%89%A7/">
										电视剧
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/11/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E7%BA%AA%E5%BD%95%E7%89%87/">
										纪录片
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/09/%E7%94%9F%E6%B4%BB%E7%9B%B8%E5%85%B3/%E9%9F%B3%E4%B9%90/">
										音乐
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										算法相关
									</a>
									
							<ul>
								<li class="file">
									<a href="/2022/11/26/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/LeetCode/">
										LeetCode
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/26/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E5%89%91%E6%8C%87OFFER/">
										剑指OFFER
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/25/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/%E9%9D%A2%E8%AF%95%E7%AE%97%E6%B3%95/">
										面试算法
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										编程语言
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/11/11/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go%E5%9F%BA%E7%A1%80/">
										Go基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/11/21/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java%E5%9F%BA%E7%A1%80/">
										Java基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/01/29/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Python%E5%9F%BA%E7%A1%80/">
										Python基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										英语相关
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										摩登家庭
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/03/05/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E6%91%A9%E7%99%BB%E5%AE%B6%E5%BA%AD/%E7%AC%AC%E4%B8%80%E5%AD%A3/">
										第一季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										老友记
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/08/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%80%81%E5%8F%8B%E8%AE%B0/%E7%AC%AC%E4%B8%80%E5%AD%A3/">
										第一季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/08/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%80%81%E5%8F%8B%E8%AE%B0/%E7%AC%AC%E4%B8%89%E5%AD%A3/">
										第三季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/11/23/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E8%80%81%E5%8F%8B%E8%AE%B0/%E7%AC%AC%E4%BA%94%E5%AD%A3/">
										第五季
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										雅思
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/01/25/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E9%9B%85%E6%80%9D/%E5%89%91%E6%A1%A5%E9%9B%85%E6%80%9D%E5%90%AC%E5%8A%9B%E7%9C%9F%E9%A2%9815/">
										剑桥雅思听力真题15
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/12/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E9%9B%85%E6%80%9D/%E5%89%91%E6%A1%A5%E9%9B%85%E6%80%9D%E5%90%AC%E5%8A%9B%E7%9C%9F%E9%A2%984/">
										剑桥雅思听力真题4
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/02/08/%E8%8B%B1%E8%AF%AD%E7%9B%B8%E5%85%B3/%E9%9B%85%E6%80%9D/%E9%9B%85%E6%80%9D%E9%98%85%E8%AF%BB538%E8%80%83%E7%82%B9%E8%AF%8D/">
										雅思阅读538考点词
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										计算机基础
									</a>
									
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">
										操作系统
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">
										数据结构
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2023/10/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%AE%97%E6%B3%95%E7%9F%A5%E8%AF%86/">
										算法知识
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2022/12/19/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">
										网络基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title" oncontextmenu="return false;">

	Guava
</h1>
<div class="article-meta" oncontextmenu="return false;">
	<span>月伴飞鱼</span>
	<span>2024-01-06 22:47:12</span>
    
		<div id="article-categories">
            
                
                    <span>
                        <i class="fa fa-folder" aria-hidden="true"></i>
                        <a href="/categories/框架相关/">框架相关</a>
						
                    </span>
                
            
		</div>
    
</div>

<div id="container" class = "content999" oncontextmenu="return false;">
<!--打赏-->
        <div class="reward">
       <div class="reward-button">赏 <span class="reward-code">
        <span class="alipay-code"> <img class="alipay-img wdp-appear" src="/alipay.png"><b>支付宝打赏</b> </span> 
        <span class="wechat-code"> <img class="wechat-img wdp-appear" src="/weipay.jpeg"><b>微信打赏</b> </span> 
       </div>
      <p class="reward-notice">如果文章对你有帮助，欢迎点击上方按钮打赏作者！</p>
      </div>
      <!--打赏-->
	<div id="article-content">
		<h1 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h1><blockquote>
<p>Guava Cache是一款非常优秀的本地缓存框架。</p>
<p>官方文档：<a target="_blank" rel="noopener" href="https://guava.dev/releases/21.0/api/docs/com/google/common/cache/Cache.html">https://guava.dev/releases/21.0/api/docs/com/google/common/cache/Cache.html</a></p>
</blockquote>
<p><strong>适用场景</strong></p>
<blockquote>
<p><code>Guava Cache</code>的实际适用场合：</p>
<ul>
<li>数据<strong>读多写少</strong>且对<strong>一致性要求不高</strong>的场景</li>
<li>对<strong>性能</strong>要求<strong>极其严苛</strong>的场景</li>
<li>简单的本地数据缓存，作为<code>HashMap/ConcurrentHashMap</code>的<strong>替代品</strong></li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th>维度</th>
<th>简要概述</th>
</tr>
</thead>
<tbody><tr>
<td>优势</td>
<td>基于<strong>空间换时间</strong>的策略，利用内存的高速处理效率，提升机器的处理性能，减少大量对外的IO请求交互，比如读取DB、请求外部网络、读取本地磁盘数据等等操作。</td>
</tr>
<tr>
<td>弊端</td>
<td>整体<strong>容量受限</strong>，可能对本机内存造成压力。此外，对于分布式多节点集群部署的场景，缓存更新场景会出现<strong>缓存漂移</strong>问题，导致各个节点之间的缓存<em>数据不一致</em>。</td>
</tr>
</tbody></table>
<p><strong>初始化</strong></p>
<pre><code class="java">final static Cache&lt;Integer, String&gt; cache = 
    CacheBuilder.newBuilder()  
        //设置cache的初始大小为10，要合理设置该值  
        .initialCapacity(10)  
        //设置并发数为5，即同一时间最多只能有5个线程往cache执行写入操作  
        .concurrencyLevel(5)  
        //设置cache中的数据在写入之后的存活时间为10秒  
        .expireAfterWrite(10, TimeUnit.SECONDS)  
        //构建cache实例  
        .build(); 
// 放入缓存 cache.put(&quot;key&quot;, &quot;value&quot;); 
// 获取缓存 String value = cache.getIfPresent(&quot;key&quot;)
</code></pre>
<blockquote>
<p>常见的属性方法，归纳说明如下：</p>
</blockquote>
<table>
<thead>
<tr>
<th>方法</th>
<th>含义说明</th>
</tr>
</thead>
<tbody><tr>
<td>newBuilder</td>
<td>构造出一个Builder实例类</td>
</tr>
<tr>
<td>initialCapacity</td>
<td>待创建的缓存容器的初始容量大小（记录<strong>条数</strong>）</td>
</tr>
<tr>
<td>maximumSize</td>
<td>指定此缓存容器的最大容量(最大缓存记录<strong>条数</strong>)</td>
</tr>
<tr>
<td>maximumWeight</td>
<td>指定此缓存容器的最大容量（最大<strong>比重</strong>值），需结合<code>weighter</code>方可体现出效果</td>
</tr>
<tr>
<td>expireAfterWrite</td>
<td>设定过期策略，按照数据<strong>写入时间</strong>进行计算</td>
</tr>
<tr>
<td>expireAfterAccess</td>
<td>设定过期策略，按照数据最后<strong>访问时间</strong>来计算</td>
</tr>
<tr>
<td>weighter</td>
<td>入参为一个函数式接口，用于指定每条存入的缓存数据的权重占比情况。这个需要与<code>maximumWeight</code>结合使用</td>
</tr>
<tr>
<td>refreshAfterWrite</td>
<td>缓存写入到缓存之后</td>
</tr>
<tr>
<td>concurrencyLevel</td>
<td>用于控制缓存的并发处理能力，同时支持多少个线程<strong>并发写入</strong>操作</td>
</tr>
<tr>
<td>recordStats</td>
<td>设定开启此容器的数据加载与缓存命中情况统计</td>
</tr>
</tbody></table>
<p><strong>相关方法</strong></p>
<table>
<thead>
<tr>
<th>接口名称</th>
<th>具体说明</th>
</tr>
</thead>
<tbody><tr>
<td>get</td>
<td>查询指定key对应的value值，如果缓存中没匹配，则基于给定的<code>Callable</code>逻辑去获取数据回填缓存中并返回</td>
</tr>
<tr>
<td>getIfPresent</td>
<td>如果缓存中存在指定的key值，则返回对应的value值，否则返回null（此方法<strong>不会触发</strong>自动回源与回填操作）</td>
</tr>
<tr>
<td>getAllPresent</td>
<td>针对传入的key列表，返回缓存中存在的对应value值列表（<strong>不会触发</strong>自动回源与回填操作）</td>
</tr>
<tr>
<td>put</td>
<td>往缓存中添加key-value键值对</td>
</tr>
<tr>
<td>putAll</td>
<td>批量往缓存中添加key-value键值对</td>
</tr>
<tr>
<td>invalidate</td>
<td>从缓存中删除指定的记录</td>
</tr>
<tr>
<td>invalidateAll</td>
<td>从缓存中批量删除指定记录，如果无参数，则清空所有缓存</td>
</tr>
<tr>
<td>size</td>
<td>获取缓存容器中的总记录数</td>
</tr>
<tr>
<td>stats</td>
<td>获取缓存容器当前的统计数据</td>
</tr>
<tr>
<td>asMap</td>
<td>将缓存中的数据转换为<code>ConcurrentHashMap</code>格式返回</td>
</tr>
<tr>
<td>cleanUp</td>
<td>清理所有的已过期的数据</td>
</tr>
</tbody></table>
<p><strong>LoadingCache</strong></p>
<blockquote>
<p>LoadingCache，它能够通过CacheLoader自发的加载缓存：如果有缓存则返回，否则运算、缓存、然后返回。</p>
</blockquote>
<pre><code class="java">CacheBuilder.newBuilder()
        .build(new CacheLoader&lt;String, String&gt;() &#123;
            @Override
            public String load(String key) throws Exception &#123;
                // 缓存加载逻辑
                ...
            &#125;
        &#125;);
</code></pre>
<p><strong>过期策略</strong></p>
<p>基于时间的过期策略:</p>
<blockquote>
<p>通过 <code>expireAfterWrite()</code> 和 <code>expireAfterAccess()</code> 方法来设置缓存项的写入后过期时间和最后访问后过期时间。</p>
<p><code>expireAfterWrite</code>：设置缓存项在写入后的过期时间，过期时间从写入操作发生后开始计算。</p>
</blockquote>
<pre><code class="java">Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
        .expireAfterWrite(10, TimeUnit.MINUTES) // 缓存项在写入后10分钟过期
        .build();

cache.put(&quot;key&quot;, &quot;value&quot;);

// 在10分钟内访问缓存项，它仍然有效
String value = cache.getIfPresent(&quot;key&quot;);

// 10分钟后，缓存项过期，再次访问将返回null
value = cache.getIfPresent(&quot;key&quot;);
</code></pre>
<blockquote>
<p><code>expireAfterAccess</code>：设置缓存项在最后访问后的过期时间，过期时间从最后一次访问操作发生后开始计算。</p>
</blockquote>
<pre><code class="java">Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
        .expireAfterAccess(5, TimeUnit.MINUTES) // 缓存项在最后一次访问后5分钟过期
        .build();

cache.put(&quot;key&quot;, &quot;value&quot;);

// 在5分钟内多次访问缓存项，它仍然有效
String value = cache.getIfPresent(&quot;key&quot;);
value = cache.getIfPresent(&quot;key&quot;);
value = cache.getIfPresent(&quot;key&quot;);

// 5分钟后，没有再次访问缓存项，它过期并被自动移除
// 再次尝试获取缓存项将返回null
value = cache.getIfPresent(&quot;key&quot;); // 返回null
</code></pre>
<p>基于大小的过期策略:</p>
<blockquote>
<p>通过 <code>maximumSize()</code> 方法设置缓存的最大大小限制，当缓存项数量达到最大值时，新的元素将会替换掉最旧的元素。</p>
</blockquote>
<pre><code class="java">Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
        .maximumSize(100) // 缓存最大容量为100
        .build();

// 在缓存容量达到100后，新的缓存项将替换最旧的缓存项
String value = cache.getIfPresent(&quot;key0&quot;); // 返回null，因为&quot;key0&quot;已被替换
value = cache.getIfPresent(&quot;key100&quot;); // 返回&quot;value100&quot;，因为它仍然在缓存中
</code></pre>
<p>基于引用的过期策略:</p>
<blockquote>
<p><code>CacheBuilder</code> 类中的 <code>weakKeys()</code> 和 <code>weakValues()</code> 方法，允许使用弱引用来存储缓存的键和值。</p>
<p>当键或值不再被其他强引用引用时，缓存项将会被自动移除。</p>
<ul>
<li><code>weakKeys()</code>：使用弱引用存储缓存的键。</li>
<li><code>weakValues()</code>：使用弱引用存储缓存的值。</li>
</ul>
<p>这些弱引用策略可用于在内存受限的情况下，允许缓存项根据垃圾回收的需要进行回收。</p>
</blockquote>
<pre><code class="java">Cache&lt;String, Object&gt; cache = CacheBuilder.newBuilder()
        .weakKeys() // 使用弱引用存储缓存的键
        .weakValues() // 使用弱引用存储缓存的值
        .build();

String key = new String(&quot;key&quot;);
Object value = new Object();

cache.put(key, value);

// 当key不再有其他强引用时，缓存项将被自动移除
value = cache.getIfPresent(key); // 返回null，因为key已没有强引用
</code></pre>
<p>基于提醒的过期策略:</p>
<blockquote>
<p>通过 <code>CacheBuilder</code> 类的 <code>expireAfterWrite()</code> 方法结合 <code>CacheBuilderSpec</code> 类的 <code>refreshAfterWrite()</code>方法，可以实现基于提醒的过期策略。</p>
<ul>
<li>该策略允许在缓存项过期时异步地加载新的值，并返回旧值。</li>
</ul>
<p>这样可以确保在缓存项过期时仍然能够返回旧值，同时异步加载新值，提高了缓存的命中率和性能。</p>
</blockquote>
<pre><code class="java">LoadingCache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
        .expireAfterWrite(10, TimeUnit.MINUTES) // 缓存项在写入后10分钟过期
        .refreshAfterWrite(1, TimeUnit.MINUTES) // 缓存项在写入后1分钟后异步刷新
        .build(new CacheLoader&lt;String, String&gt;() &#123;
            @Override
            public String load(String key) &#123;
                return &quot;value&quot;; // 在缓存项过期时异步加载新的值
            &#125;
        &#125;);

String value = cache.get(&quot;key&quot;);

// 10分钟内，获取缓存项将返回旧值，并异步加载新的值
value = cache.get(&quot;key&quot;);

// 10分钟后，缓存项过期，获取缓存项将返回新的值
value = cache.get(&quot;key&quot;);
</code></pre>
<blockquote>
<p>在get执行逻辑中进行数据过期清理以及重新回源加载的执行判断。</p>
<p>在执行get请求的时候，会先判断下当前查询的数据是否过期，如果已经过期，则会触发对当前操作的<code>Segment</code>的过期数据清理操作。</p>
</blockquote>
<img src="/images/297.png" alt="image-20240107122241651" style="zoom:50%;" />

<p><strong>淘汰策略</strong></p>
<blockquote>
<p>当容量触达阈值后，支持根据<code>FIFO + LRU</code>策略实施具体淘汰处理以腾出位置给新的记录使用。</p>
</blockquote>
<table>
<thead>
<tr>
<th>淘汰策略</th>
<th>具体说明</th>
</tr>
</thead>
<tbody><tr>
<td>FIFO</td>
<td>根据缓存记录写入的顺序，先写入的先淘汰</td>
</tr>
<tr>
<td>LRU</td>
<td>根据访问顺序，淘汰最久没有访问的记录</td>
</tr>
</tbody></table>
<blockquote>
<p>限制缓存<strong>记录条数</strong></p>
</blockquote>
<pre><code class="java">public Cache&lt;String, User&gt; createUserCache() &#123;
    return CacheBuilder.newBuilder()
            .maximumSize(10000L)
            .build();
&#125;
</code></pre>
<blockquote>
<p>限制缓存<strong>记录权重</strong></p>
<ul>
<li>按照权重进行限制缓存容量的时候必须要指定<code>weighter</code>属性才可以生效。</li>
</ul>
<p>通过计算<code>value</code>对象的字节数（byte）来计算其权重信息，每1kb的字节数作为1个权重，整个缓存容器的总权重限制为1w，这样就可以实现将缓存内存占用控制在<code>10000*1k≈10M</code>左右。</p>
<p>基于<code>weight</code>权重的控制方式，比较适用于这种对容器体量控制<strong>精度</strong>有<strong>严格诉求</strong>的场景，可以在创建容器的时候指定每条记录的权重计算策略（比如基于字符串长度或者基于<code>bytes</code>数组长度进行计算权重）。</p>
</blockquote>
<pre><code class="java">public Cache&lt;String, User&gt; createUserCache() &#123;
    return CacheBuilder.newBuilder()
            .maximumWeight(10000L)
            .weigher((key, value) -&gt; (int) Math.ceil(instrumentation.getObjectSize(value) / 1024L))
            .build();
    &#125;
</code></pre>
<p><strong>更新锁定能力</strong></p>
<blockquote>
<p>为了防止缓存击穿问题，可以通过<strong>加锁</strong>的方式来规避。</p>
<p>当缓存不可用时，仅<code>持锁的线程</code>负责从数据库中查询数据并写入缓存中，其余请求重试时先尝试从缓存中获取数据，避免所有的并发请求全部同时打到数据库上。</p>
<p><code>Guava Cache</code>自带了<code>并发锁定</code>机制，同一时刻仅允许一个请求去回源获取数据并回填到缓存中，而其余请求则阻塞等待，不会造成数据源的压力过大。</p>
</blockquote>
<p><strong>不回源查询</strong></p>
<table>
<thead>
<tr>
<th>接口</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>getIfPresent</td>
<td>从内存中查询，如果存在则返回对应值，不存在则返回null</td>
</tr>
<tr>
<td>getAllPresent</td>
<td>批量从内存中查询，如果存在则返回存在的键值对，不存在的key则不出现在结果集里</td>
</tr>
</tbody></table>
<blockquote>
<p>上述两种接口，执行的时候仅会从当前内存中已有的缓存数据里面进行查询，不会触发回源的操作。</p>
</blockquote>
<pre><code class="java">public static void main(String[] args) &#123;
    try &#123;
        GuavaCacheService cacheService = new GuavaCacheService();
        Cache&lt;String, User&gt; cache = cacheService.createCache();
        cache.put(&quot;123&quot;, new User(&quot;123&quot;, &quot;123&quot;));
        cache.put(&quot;124&quot;, new User(&quot;124&quot;, &quot;124&quot;));
        System.out.println(cache.getIfPresent(&quot;125&quot;));
        ImmutableMap&lt;String, User&gt; allPresentUsers =
                cache.getAllPresent(Stream.of(&quot;123&quot;, &quot;124&quot;, &quot;125&quot;).collect(Collectors.toList()));
        System.out.println(allPresentUsers);
    &#125; catch (Exception e) &#123;
        e.printStackTrace();
    &#125;
&#125;
</code></pre>
<p><strong>监控统计</strong></p>
<blockquote>
<p>提供了<code>stat</code>统计日志，支持查看缓存数据的加载或者命中情况统计。</p>
<p>可以基于命中情况，不断的去优化代码中缓存的数据策略，以发挥出缓存的最大价值。</p>
</blockquote>
<blockquote>
<p>Guava Cache的统计信息封装为<code>CacheStats</code>对象进行承载，主要包含一下几个关键指标项：</p>
</blockquote>
<table>
<thead>
<tr>
<th>指标</th>
<th>含义说明</th>
</tr>
</thead>
<tbody><tr>
<td>hitCount</td>
<td>命中缓存次数</td>
</tr>
<tr>
<td>missCount</td>
<td>没有命中缓存次数（查询的时候内存中没有）</td>
</tr>
<tr>
<td>loadSuccessCount</td>
<td>回源加载的时候加载成功次数</td>
</tr>
<tr>
<td>loadExceptionCount</td>
<td>回源加载但是加载失败的次数</td>
</tr>
<tr>
<td>totalLoadTime</td>
<td>回源加载操作总耗时</td>
</tr>
<tr>
<td>evictionCount</td>
<td>删除记录的次数</td>
</tr>
</tbody></table>
<blockquote>
<p>缓存容器创建的时候，可以通过<code>recordStats()</code>开启缓存行为的统计记录。</p>
</blockquote>
<pre><code class="java">    public static void main(String[] args) &#123;
        LoadingCache&lt;String, User&gt; cache = CacheBuilder.newBuilder()
                .recordStats()
                .build(new CacheLoader&lt;String, User&gt;() &#123;
                    @Override
                    public User load(String key) throws Exception &#123;
                        System.out.println(key + &quot;用户缓存不存在，尝试CacheLoader回源查找并回填...&quot;);
                        User user = userDao.getUser(key);
                        if (user == null) &#123;
                            System.out.println(key + &quot;用户不存在&quot;);
                        &#125;
                        return user;
                    &#125;
                &#125;);

        try &#123;
            System.out.println(cache.get(&quot;123&quot;);
            System.out.println(cache.get(&quot;124&quot;));
            System.out.println(cache.get(&quot;123&quot;));
            System.out.println(cache.get(&quot;126&quot;));

        &#125; catch (Exception e) &#123;
        &#125; finally &#123;
            CacheStats stats = cache.stats();
            System.out.println(stats);
        &#125;
    &#125;
</code></pre>
<p><strong>缓存刷新</strong></p>
<blockquote>
<p>支持定时刷新和显式刷新两种方式，其中只有<code>LoadingCache</code>能够进行定时刷新。</p>
<p>在进行缓存定时刷新时，需要指定缓存的刷新间隔，和一个用来加载缓存的CacheLoader，当达到刷新时间间隔后，下一次获取缓存时，会调用<code>CacheLoader</code>的<code>load</code>方法刷新缓存。</p>
</blockquote>
<blockquote>
<p>例如构建个刷新频率为10分钟的缓存:</p>
</blockquote>
<pre><code class="java">CacheBuilder.newBuilder()
        // 设置缓存在写入10分钟后，通过CacheLoader的load方法进行刷新
        .refreshAfterWrite(10, TimeUnit.SECONDS)
        // jdk8以后可以使用 Duration
        // .refreshAfterWrite(Duration.ofMinutes(10))
        .build(new CacheLoader&lt;String, String&gt;() &#123;
            @Override
            public String load(String key) throws Exception &#123;
                // 缓存加载逻辑
                ...
            &#125;
        &#125;);
</code></pre>
<blockquote>
<p>refresh操作采用一种<strong>被动触发</strong>的方式来实现。</p>
<p>当get操作执行的时候会判断下如果创建时间已经超过了设定的刷新间隔，则会重新去执行一次数据的加载逻辑。</p>
<p>鉴于缓存<strong>读多写少</strong>的特点，Guava Cache在数据refresh操作执行的时候，采用了一种<strong>非阻塞式</strong>的加载逻辑，尽可能的保证并发场景下对读取线程的性能影响。</p>
</blockquote>
<img src="/images/298.png" alt="image-20240107122618462" style="zoom:50%;" />

<blockquote>
<p>同一时刻仅允许一个线程执行数据重新加载操作，并<strong>阻塞等待</strong>重新加载完成之后该线程的查询请求才会返回对应的新值作为结果。</p>
<p>当一个线程正在阻塞执行<code>refresh</code>数据刷新操作的时候，其它线程此时来执行get请求的时候，会判断下数据需要refresh操作，但是因为没有获取到refresh执行锁，这些其它线程的请求<strong>不会被阻塞</strong>等待refresh完成，而是<strong>立刻返回</strong>当前refresh前的<strong>旧值</strong>。</p>
<p>当执行refresh的线程操作完成后，此时另一个线程再去执行get请求的时候，会判断无需refresh，直接返回当前内存中的当前值即可。</p>
</blockquote>
<img src="/images/299.png" alt="image-20240107122841708" style="zoom:50%;" />

<blockquote>
<p>数据expire与refresh关系：</p>
</blockquote>
<table>
<thead>
<tr>
<th>操作</th>
<th>优势</th>
<th>弊端</th>
</tr>
</thead>
<tbody><tr>
<td>expire</td>
<td>有效防止缓存击穿问题，且阻塞等待的方式可以保证业务层面获取到的缓存数据的强一致性。</td>
<td>高并发场景下，如果回源的耗时较长，会导致多个读线程被阻塞等待，影响整体的并发效率。</td>
</tr>
<tr>
<td>refresh</td>
<td>可以最大限度的保证查询操作的执行效率，避免过多的线程被阻塞等待。</td>
<td>多个线程并发请求同一个key对应的缓存值拿到的结果可能不一致，在对于一致性要求特别严苛的业务场景下可能会引发问题。</td>
</tr>
</tbody></table>
<img src="/images/300.png" alt="image-20240107123111255" style="zoom:50%;" />

<blockquote>
<p>在具体使用时，需要根据场景综合判断：</p>
<ul>
<li>数据需要<strong>永久存储</strong>，且<strong>不会变更</strong>，这种情况下<code>expire</code>和<code>refresh</code>都并不需要设定</li>
<li>数据<strong>极少变更</strong>，或者对变更的感知诉求不强，且并发请求同一个key的竞争压力不大，直接使用<code>expire</code>即可</li>
<li>数据<strong>无需过期</strong>，但是可能<strong>会被修改</strong>，需要及时感知并更新缓存数据，直接使用<code>refresh</code></li>
<li>数据<strong>需要过期</strong>（避免不再使用的数据始终留在内存中）、也需要在有效期内尽可能保证数据的<strong>更新一致性</strong>，则采用<code>expire</code>与<code>refresh</code>两者<strong>结合</strong>。</li>
</ul>
<p>对于expire与refresh结合使用的场景，两者的时间间隔设置，需要注意：</p>
<ul>
<li>expire时间设定要<strong>大于</strong>refresh时间，否则的话refresh将永远没有机会执行</li>
</ul>
</blockquote>
<p><strong>数据结构</strong></p>
<blockquote>
<p>跟 <code>JDK1.7</code> 的 <code>ConcurrentHashMap</code> 类似，提供了基于时间、容量、引用三种回收策略，以及自动加载、访问统计等功能。</p>
<p>Guava Cache中采用的是这种<strong>分段锁</strong>策略来降低锁的粒度，可以在创建缓存容器的时候使用<code>concurrencyLevel</code>来指定允许的<strong>最大并发线程数</strong>，使得线程安全的前提下尽可能的减少锁争夺。</p>
</blockquote>
<p><img src="/images/301.png" alt="图片"></p>
<blockquote>
<p>Guava Cache在put写操作的时候，会首先计算出key对应的hash值，然后根据hash值来确定数据应该写入到哪个Segment中，进而对该Segment加锁执行写入操作。</p>
</blockquote>
<blockquote>
<p><code>concurrencyLevel</code>只是一个<strong>理想状态</strong>下的最大同时并发数，也取决于同一时间的操作请求是否会平均的分散在各个不同的Segment中。</p>
<p>极端情况下，如果多个线程操作的目标对象都在同一个分片中时，那么只有1个线程可以持锁执行，其余线程都会阻塞等待。</p>
</blockquote>
<blockquote>
<p>实际使用中，比较推荐的是将concurrencyLevel设置为<strong>CPU核数的2倍</strong>，以获得较优的并发性能。</p>
</blockquote>
<h1 id="RateLimiter"><a href="#RateLimiter" class="headerlink" title="RateLimiter"></a>RateLimiter</h1><blockquote>
<p><code>RateLimiter</code>采用令牌桶的原理限制同一时刻的并发数量，起到限流作用。</p>
<p><code>RateLimiter</code>是一个线程安全的对象，可以在多线程环境下使用。</p>
</blockquote>
<p><strong>简单使用</strong></p>
<blockquote>
<p>创建一个<code>RateLimiter</code>，设定每秒产生的令牌数量：</p>
</blockquote>
<pre><code class="java">//每秒产生 10 个令牌
RateLimiter rateLimiter = RateLimiter.create(10);
</code></pre>
<blockquote>
<p>阻塞获取令牌：</p>
</blockquote>
<pre><code class="java">//从令牌桶内获取令牌，获取成功则返回，获取不到则一直阻塞直至获取
rateLimiter.acquire();
</code></pre>
<blockquote>
<p>尝试获取令牌：</p>
</blockquote>
<pre><code class="java">//尝试获取令牌，获取成功则立刻返回 true，否则返回 false
boolean gainSuccess = rateLimiter.tryAcquire()
</code></pre>
<p><strong>实现原理</strong></p>
<blockquote>
<p>在令牌桶模型中，有定时生成令牌的令牌生成器，而<code>RateLimiter</code>中并没有令牌生成器，也没有专门的后台线程来定时生成令牌，而是采用了<strong>基于时间戳、纯依赖使用方线程驱动</strong>的方式来实现。</p>
</blockquote>

	</div>
</div>


    <div class="post-guide">
        <div class="item left">
            
              <a href="/2024/01/07/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Caffeine/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  Caffeine
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/2023/12/25/%E4%B8%AD%E9%97%B4%E4%BB%B6/Solr/">
                Solr
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>




<script>

    //document.oncontextmenu=new Function("event.returnValue=false");
	//document.onselectstart=new Function("event.returnValue=false");

	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?7eeb54583579fabc0878be210d6ad60a";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();

	

	$(function () {
		const btw = new BTWPlugin();
	    btw.init({
	        id: 'container',
	        blogId: '22377-1706525467336-300',
	        name: '月伴飞鱼',
	        qrcode: '/小程序码.jpg',
	        keyword: '验证码',
	        btnText: '为防止机器刷接口，需要完成人机检测',
        	cookieAge: 1
	    });

	    var contents = document.getElementsByClassName("content999");
	    //监听文章内容的copy事件
	    contents[0].addEventListener('copy',function(e){
	        setClipboardText(e);
	    });

	    function setClipboardText(event){
	        // clipboardData 对象是为通过编辑菜单、快捷菜单和快捷键执行的编辑操作所保留的，也就是你复制或者剪切内容
	        let clipboardData = event.clipboardData || window.clipboardData;

	        // 如果未复制或者未剪切，则return出去
	        if (!clipboardData) { return; }

	        event.preventDefault();

	        // Selection 对象，表示用户选择的文本范围或光标的当前位置。
	        // 声明一个变量接收 -- 用户输入的剪切或者复制的文本转化为字符串
	        let text = window.getSelection().toString();
	    
	        if (text) {
	            // 如果文本存在则先取消文本默认事件
	            event.preventDefault();
	            // 通过调用常clipboardData对象的 setData(format, data) 方法；来设置相关文本
	            // format: 一个DOMString 表示要添加到 drag object的拖动数据的类型。
	            // data: 一个 DOMString表示要添加到 drag object的数据。
	            var copyright = '\n\n'
	            + '\n著作权归作者所有。'
	            + '\n商业转载请联系作者获得授权，非商业转载请注明出处。'
	            + '\n作者: 月伴飞鱼'
	            + '\n原文地址: http://hardyfish.top/2024/01/06/%E6%A1%86%E6%9E%B6%E7%9B%B8%E5%85%B3/Guava/'
	    
	            clipboardData.setData('text/plain', text + copyright);
	    
	        }
	    };
	});

	
</script>

<script>
    const btw = new BTWPlugin();
    btw.init({
        id: 'container',
        blogId: '22377-1706525467336-300',
        name: '月伴飞鱼',
        qrcode: '/小程序码.jpg',
        keyword: '验证码',
        btnText: '为防止机器刷接口，需要完成人机检测',
        cookieAge: 1
    });

	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "https://hm.baidu.com/hm.js?7eeb54583579fabc0878be210d6ad60a";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
</script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">月伴飞鱼</a> 
	
	
		|
		<span id="busuanzi_container_site_pv">
			PV 180986
		</span>
		|
		<span id="busuanzi_container_site_uv"> 
			UV 10079
		</span>
	
	<br>
	微信搜索 <a href="https://xiaoflyfish.oss-cn-beijing.aliyuncs.com/image/个人公众号.jpg" target="_blank">月伴飞鱼</a> 关注我
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>